"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CdkSecurityGroupStack = void 0;
const ec2 = require("@aws-cdk/aws-ec2");
const cdk = require("@aws-cdk/core");
class CdkSecurityGroupStack extends cdk.Stack {
    constructor(scope, id, props) {
        super(scope, id, props);
        const ipToAllowWithMask = `${props.ipToAllow}/32`;
        const securityGroup = this.getSecurityGroup(props.securityGroupId);
        securityGroup.addIngressRule(ec2.Peer.ipv4(ipToAllowWithMask), ec2.Port.tcp(22), 'Allow SSH Access');
        securityGroup.addIngressRule(ec2.Peer.ipv4(ipToAllowWithMask), ec2.Port.tcp(80), 'Allow HTTP Access');
    }
    getSecurityGroup(sgId) {
        return ec2.SecurityGroup.fromLookup(this, 'SGLookUp', sgId);
    }
}
exports.CdkSecurityGroupStack = CdkSecurityGroupStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2RrLXNlY3VyaXR5LWdyb3VwLXN0YWNrLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vbGliL2Nkay1zZWN1cml0eS1ncm91cC1zdGFjay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSx3Q0FBd0M7QUFDeEMscUNBQXFDO0FBT3JDLE1BQWEscUJBQXNCLFNBQVEsR0FBRyxDQUFDLEtBQUs7SUFDbEQsWUFBWSxLQUFvQixFQUFFLEVBQVUsRUFBRSxLQUFpQztRQUM3RSxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUN4QixNQUFNLGlCQUFpQixHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsS0FBSyxDQUFBO1FBQ2pELE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsZUFBZSxDQUFDLENBQUE7UUFDbEUsYUFBYSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLGtCQUFrQixDQUFDLENBQUE7UUFDcEcsYUFBYSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLG1CQUFtQixDQUFDLENBQUE7SUFDdkcsQ0FBQztJQUVPLGdCQUFnQixDQUFDLElBQVk7UUFDbkMsT0FBTyxHQUFHLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsVUFBVSxFQUFFLElBQUksQ0FBc0IsQ0FBQTtJQUNsRixDQUFDO0NBQ0Y7QUFaRCxzREFZQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGVjMiBmcm9tICdAYXdzLWNkay9hd3MtZWMyJztcbmltcG9ydCAqIGFzIGNkayBmcm9tICdAYXdzLWNkay9jb3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBDZGtTZWN1cml0eUdyb3VwU3RhY2tQcm9wcyBleHRlbmRzIGNkay5TdGFja1Byb3BzIHtcbiAgaXBUb0FsbG93OiBzdHJpbmdcbiAgc2VjdXJpdHlHcm91cElkOiBzdHJpbmdcbn1cblxuZXhwb3J0IGNsYXNzIENka1NlY3VyaXR5R3JvdXBTdGFjayBleHRlbmRzIGNkay5TdGFjayB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBjZGsuQ29uc3RydWN0LCBpZDogc3RyaW5nLCBwcm9wczogQ2RrU2VjdXJpdHlHcm91cFN0YWNrUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQsIHByb3BzKTtcbiAgICBjb25zdCBpcFRvQWxsb3dXaXRoTWFzayA9IGAke3Byb3BzLmlwVG9BbGxvd30vMzJgXG4gICAgY29uc3Qgc2VjdXJpdHlHcm91cCA9IHRoaXMuZ2V0U2VjdXJpdHlHcm91cChwcm9wcy5zZWN1cml0eUdyb3VwSWQpXG4gICAgc2VjdXJpdHlHcm91cC5hZGRJbmdyZXNzUnVsZShlYzIuUGVlci5pcHY0KGlwVG9BbGxvd1dpdGhNYXNrKSwgZWMyLlBvcnQudGNwKDIyKSwgJ0FsbG93IFNTSCBBY2Nlc3MnKVxuICAgIHNlY3VyaXR5R3JvdXAuYWRkSW5ncmVzc1J1bGUoZWMyLlBlZXIuaXB2NChpcFRvQWxsb3dXaXRoTWFzayksIGVjMi5Qb3J0LnRjcCg4MCksICdBbGxvdyBIVFRQIEFjY2VzcycpXG4gIH1cblxuICBwcml2YXRlIGdldFNlY3VyaXR5R3JvdXAoc2dJZDogc3RyaW5nKTogZWMyLlNlY3VyaXR5R3JvdXAge1xuICAgIHJldHVybiBlYzIuU2VjdXJpdHlHcm91cC5mcm9tTG9va3VwKHRoaXMsICdTR0xvb2tVcCcsIHNnSWQpIGFzIGVjMi5TZWN1cml0eUdyb3VwXG4gIH1cbn0iXX0=